{"version":3,"sources":["signet.js"],"names":["signetBuilder","typelog","validator","checker","parser","assembler","isType","typeStr","value","alias","key","typeDef","parseType","defineSubtypeOf","type","isTypeOf","typeValue","addImmutableProperty","obj","Object","defineProperty","writeable","attachSignatureAssembler","fn","signatureTree","get","assembleSignature","throwOnSignatureError","signatureCheckResult","checkSignature","lastIndex","length","SyntaxError","Error","invalidTypes","map","assembleType","TypeError","join","signFn","sign","signature","parseSignature","last","list","throwEvaluationError","valueInfo","prefixMixin","valueType","errorMessage","verify","args","result","validateArguments","buildEnforcer","Array","prototype","slice","call","arguments","validationResult","signatureIsCurried","returnType","functionTypeDef","returnTypeStr","apply","validateType","enforceOnTree","buildArgNames","argCount","startChar","charCodeAt","argNames","i","push","String","fromCharCode","enforcer","enforceDecorator","Function","enforcementTemplate","replace","toString","bind","enforce","rangeBuilder","options","min","Number","max","validateHigherKindedType","filter","isVariant","option","defineDuckType","typeName","objectDef","duckTypeFactory","definitionPairs","keys","reduce","tuples","typePredicate","typePair","define","Math","floor","inRange","pattern","RegExp","match","lengthOkay","tupleOkay","index","console","warn","extend","isSubtypeOf","subtype","typeChain","getTypeChain","signetAssembler","hasSubtype","buildSubtype","optional","assembleTypeList","typeList","typeTree","module","exports","signetChecker","registrar","checkType","concat","resultList","not","predicate","ast","failedTypes","signetParser","terminateSubtype","bracketStack","currentChar","isStructuralChar","char","captureChar","updateStack","pop","buildAppender","subtypeStr","capture","updateSubtypeInfo","subtypeInfo","getUpdatedSubtypeStr","appendOnRule","terminate","parseSubtype","getSubtypeStr","updateSubtypes","split","forEach","typePattern","rawType","name","trim","parseParams","token","parameterTokens","signetRegistrar","isValidTypeName","throwOnBadType","registry","set","signetTypelog","validateOptionalType","validateOptional","setImmutableProperty","parentName","childName","parentTypeName","parentTypeDef","undefined","signetValidator","first","rest","argument","validateCurrentValue","argumentList","isValidated","nextArgs","validateNext","accepted","signet","buildSignet"],"mappings":"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","file":"signet.min.js"}