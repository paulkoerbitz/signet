{"version":3,"sources":["signet.js"],"names":["signetBuilder","typelog","validator","checker","parser","assembler","registrar","isType","typeStr","value","alias","key","typeDef","parseType","defineSubtypeOf","type","isTypeOf","typeValue","addImmutableProperty","obj","Object","defineProperty","writeable","attachSignatureAssembler","fn","signatureTree","get","assembleSignature","throwOnSignatureError","signatureCheckResult","checkSignature","lastIndex","length","SyntaxError","Error","invalidTypes","map","assembleType","TypeError","join","signFn","sign","signature","parseSignature","last","list","throwEvaluationError","valueInfo","prefixMixin","valueType","errorMessage","verify","args","result","validateArguments","buildEnforcer","Array","prototype","slice","call","arguments","validationResult","signatureIsCurried","returnType","functionTypeDef","returnTypeStr","apply","validateType","enforceOnTree","buildArgNames","argCount","startChar","charCodeAt","argNames","i","push","String","fromCharCode","enforcer","enforceDecorator","Function","enforcementTemplate","replace","toString","bind","enforce","rangeBuilder","options","min","Number","max","validateHigherKindedType","filter","isVariant","option","defineDuckType","typeName","objectDef","duckTypeFactory","definitionPairs","keys","reduce","tuples","typePredicate","concat","typePair","typeChain","predicate","undefined","parentTypeName","define","Math","floor","inRange","pattern","RegExp","match","lengthOkay","tupleOkay","index","console","warn","extend","isSubtypeOf","subtype","signetAssembler","hasSubtype","buildSubtype","optional","assembleTypeList","typeList","typeTree","module","exports","signetChecker","checkType","resultList","not","ast","failedTypes","signetParser","terminateSubtype","bracketStack","currentChar","isStructuralChar","char","captureChar","updateStack","pop","buildAppender","subtypeStr","capture","updateSubtypeInfo","subtypeInfo","getUpdatedSubtypeStr","appendOnRule","terminate","parseSubtype","getSubtypeStr","updateSubtypes","split","forEach","typePattern","rawType","name","trim","parseParams","token","parameterTokens","signetRegistrar","isValidTypeName","throwOnBadType","registry","set","signetTypelog","validateOptionalType","validateOptional","setImmutableProperty","parentName","childName","parentTypeDef","signetValidator","first","rest","argumentList","argument","signet","buildSignet"],"mappings":"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","file":"signet.min.js"}